var mx=function(){"use strict";var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};function t(t,o){function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}var h=function(){return(h=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}).apply(this,arguments)};var n=(o.VIBRATESWITCH_CHANGED="VIBRATESWITCH_CHANGED",o.SOUNDSWITCH_CHANGED="SOUNDSWITCH_CHANGED",o.MUSICSWITCH_CHANGED="MUSICSWITCH_CHANGED",o.ON_PLATFORM_SHOW="ON_PLATFORM_SHOW",o.ON_PLATFORM_HIDE="ON_PLATFORM_HIDE",o.ON_BANNER_ERROR="ON_BANNER_ERROR",o.ON_BANNER_HIDE="ON_BANNER_HIDE",o.ON_AD_SHOW="ON_AD_SHOW",o.AD_VIEW_CHANGE="AD_VIEW_CHANGE",o.AD_VIEW_REFRESH="AD_VIEW_REFRESH",o.COIN_CHANGED="COIN_CHANGED",o.RANDOWM_NAVIGATE="RANDOWM_NAVIGATE",o.COMPONENT_CHECKBOX_TOGGLE="COMPONENT_CHECKBOX_TOGGLE",o.PRIZE_BOX_UNLOCAK="PRIZE_BOX_UNLOCAK",o);function o(){}var r=0,e=1,a=2,s=16,c=32,l=128,u=256,m=512,p=32768,d=16384,f=function(t,o){this.formNode=null,this.formLogic=null,this.formNode=t,this.formLogic=o},y=(v.prototype.addForm=function(t,o){this.quene.push(new f(t,o))},v.prototype.addFormKV=function(t){this.quene.push(t)},v);function v(t,o,e){this.formName="",this.quene=[],this.formName=t,this.quene.push(new f(o,e))}var g=(Object.defineProperty(w,"instance",{get:function(){return this.mInstance||(this.mInstance=new w),this.mInstance},enumerable:!0,configurable:!0}),Object.defineProperty(w,"formQuene",{get:function(){return this._FormQuene},enumerable:!0,configurable:!0}),w.cachedQuene=function(){return this._CachedQuene},w.addFrom2Cached=function(t,o){for(var e=null,i=0;i<this._CachedQuene.length;i++){var n=this._CachedQuene[i];if(n.formName==t){e=n;break}}e?e.addFormKV(o):this._CachedQuene.push(new y(t,o.formNode,o.formLogic))},w.getFormFromCached=function(t){for(var o=0;o<this.formQuene.length;o++){var e=this.formQuene[o];if(e.formName==t){var i=0;if(i<e.quene.length)return e.quene.splice(i,1),e.quene[i];break}}return null},w.addForm2Quene=function(t,o,e){for(var i=-1,n=0;n<this._FormQuene.length;n++)if(this._FormQuene[n].formName==t){i=n;break}-1!=i?this._FormQuene[i].addForm(o,e):this._FormQuene.push(new y(t,o,e))},w.recoverFormLogic=function(o,t,e,i){var n=this;void 0===i&&(i=1);var r=o.quene.splice(t,i);r.forEach(function(t){n.addFrom2Cached(o.formName,t)}),e&&(1==r.length?e(r[0]):e(r))},w.removeFormByLogic=function(t,o){for(var e=0;e<this.formQuene.length;e++)for(var i=this.formQuene[e],n=0;n<i.quene.length;n++)if(i.quene[n].formLogic==t){this.recoverFormLogic(i,n,o);break}},w.removeFormFromQuene=function(t,o,e){for(var i=0;i<this.formQuene.length;i++){var n=this.formQuene[i];if(n.formName==t){for(var r=0;r<n.quene.length;r++)if(n.quene[r]==o){this.recoverFormLogic(n,r,e);break}break}}},w.removeAllFormFromQuene=function(t,o){for(var e=0;e<this.formQuene.length;e++){var i=this.formQuene[e];if(i.formName==t){for(var n=0;n<i.quene.length;n++)this.recoverFormLogic(i,n,o),n--;break}}},w.prototype.getLayout=function(t){var e=this;this.mCachedLayout?t(this.mCachedLayout):(this.mLayoutQuene.push(t),1==this.mLayoutQuene.length&&moosnow.http.request(this.layoutUrl,{},"GET",function(o){e.mCachedLayout=o,console.log("getLayout call num ",e.mLayoutQuene.length),e.mLayoutQuene.forEach(function(t){t(o)}),e.mLayoutQuene=[]}))},w.prototype.getTemplates=function(t){var e=this;this.mCachedTemplates?t(this.mCachedTemplates):(this.mTemplatesQuene.push(t),1==this.mTemplatesQuene.length&&moosnow.http.request(this.templatesUrl,{},"GET",function(o){e.mCachedTemplates=o,e.mTemplatesQuene.forEach(function(t){t(o)}),e.mTemplatesQuene=[]}))},w.prototype.showForm=function(t,o,e,i,n,r,a){void 0===r&&(r=!0),void 0===a&&(a=null)},w.prototype.hideFormByLogic=function(t,o){},w.prototype.hideForm=function(t,o,e){},w.prototype.createNodeByTemplate=function(t,o,e,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=null)},w.prototype.hideNodeByTemplate=function(t,o,e){},w.mInstance=null,w._FormQuene=[],w._CachedQuene=[],w);function w(){this.layoutUrl="https://liteplay-1253992229.cos.ap-guangzhou.myqcloud.com/Game/demo/layout.json",this.templatesUrl="https://liteplay-1253992229.cos.ap-guangzhou.myqcloud.com/Game/demo/templates.json",this.mLayoutQuene=[],this.mTemplatesQuene=[]}var C=(Object.defineProperty(N,"canvasNode",{get:function(){return cc.Canvas.instance.node},enumerable:!0,configurable:!0}),N.getNodeName=function(){return this.nodeNum++,"createNode"+this.nodeNum},N.createNode=function(){},N.createImage=function(t,o){},N.createText=function(t,o){},N.changeSrc=function(t,o){},N.createMask=function(t){},N.nodeNum=0,N);function N(){}var b,A,F="https://liteplay-1253992229.cos.ap-guangzhou.myqcloud.com";(A=b=b||{})[A.WX=0]="WX",A[A.BYTEDANCE=1]="BYTEDANCE",A[A.OPPO=2]="OPPO",A[A.OPPO_ZS=3]="OPPO_ZS",A[A.BAIDU=4]="BAIDU",A[A.QQ=5]="QQ",A[A.PC=6]="PC",A[A.VIVO=7]="VIVO";var T="cc",S="Laya",k="",D=(x.titleCase=function(t){for(var o=t.toLowerCase().split(/\s+/),e=0;e<o.length;e++)o[e]=o[e].slice(0,1).toUpperCase()+o[e].slice(1);return o.join(" ")},x.numFixed=function(t,o){return parseFloat(parseFloat(t).toFixed(o))},x.parseMoney=function(t){return isNaN(t)?0:parseFloat(parseFloat(t).toFixed(2))},x.objKeySort=function(t){for(var o=Object.keys(t).sort(),e={},i=0;i<o.length;i++)e[o[i]]=t[o[i]];return e},x.isObject=function(t){var o=typeof t;return null!==t&&("object"==o||"function"==o)},x.object2Query=function(t){var o=[];for(var e in t)o.push(e+"="+t[e]);return o.join("&")},x.isFunction=function(t){return"function"==typeof t},x.isEmpty=function(t){if("object"!=typeof t)return null==t||"null"===t||"undefined"===t||""===t;var o;for(o in t)return!1;return!0},x.formatTime=function(t){return[t.getHours(),t.getMinutes()].map(this.formatNumber).join(":")},x.formatNumber=function(t){return(t=t.toString())[1]?t:"0"+t},x.copy=function(t,o){for(var e in t)o[e]=t[e]},x.randomNumBoth=function(t,o){var e=o-t,i=Math.random();return t+Math.round(i*e)},x.randomFloat=function(t,o){return t+Math.random()*o},x.randomToRatio=function(t,o,e){return this.randomNumBoth(t,o)<=e},x.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)})},x.isNumber=function(t){return"number"==typeof t||"[object Number]"==Object.prototype.toString.call(t)},x.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},x.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},Object.defineProperty(x,"platform",{get:function(){if(this.mPlatform)return this.mPlatform;var t,o=window.moosnowConfig;return window.tt?this.mPlatform=b.BYTEDANCE:window.swan?this.mPlatform=b.BAIDU:window.qq?this.mPlatform=b.QQ:window.qg?window.qg&&window.qg.getSystemInfoSync?(t=window.qg.getSystemInfoSync(),console.log("平台判断",JSON.stringify(t)),t&&t.brand&&-1!=t.brand.toLocaleLowerCase().indexOf("vivo")?this.mPlatform=b.VIVO:-1!=o.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=b.OPPO_ZS:this.mPlatform=b.OPPO):-1!=o.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=b.OPPO_ZS:this.mPlatform=b.OPPO:window.wx?this.mPlatform=b.WX:o.debug&&o[o.debug]?"wx"==o.debug?this.mPlatform=b.WX:"oppo"==o.debug?-1!=o.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=b.OPPO_ZS:this.mPlatform=b.OPPO:"bd"==o.debug?this.mPlatform=b.BAIDU:"byte"==o.debug?this.mPlatform=b.BYTEDANCE:"qq"==o.debug?this.mPlatform=b.QQ:"vivo"==o.debug?this.mPlatform=b.VIVO:this.mPlatform=b.PC:this.mPlatform=b.PC,this.mPlatform},enumerable:!0,configurable:!0}),Object.defineProperty(x,"config",{get:function(){var t=window.moosnowConfig,o=x.platform==b.WX?t.wx:x.platform==b.OPPO||x.platform==b.OPPO_ZS?t.oppo:x.platform==b.VIVO?t.vivo:x.platform==b.QQ?t.qq:x.platform==b.BAIDU?t.bd:x.platform==b.BYTEDANCE?t.byte:t.wx;return o},enumerable:!0,configurable:!0}),x.colorRGB2Hex=function(t){var o=t.split(",");return"#"+((1<<24)+(parseInt(o[0].split("(")[1])<<16)+(parseInt(o[1])<<8)+parseInt(o[2].split(")")[0])).toString(16).slice(1)},x.deepCopy=function(t){var o=Array.isArray(t)?[]:{};if(t&&"object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(t[e]&&"object"==typeof t[e]?o[e]=this.deepCopy(t[e]):o[e]=t[e]);return o},x.getEngine=function(){return window[T]?T:window[S]?S:k},x.popOpenAnim=function(t,o){if(this.getEngine()==T)return t.scale=.8,void t.runAction(cc.sequence(cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1),cc.callFunc(function(){o&&o()},this)));o()},x.popCloseAnim=function(t,o){if(this.getEngine()==T)return t.scale=1,void t.runAction(cc.sequence(cc.scaleTo(.1,0,0),cc.callFunc(function(){o&&o()},this)));o()},x.format=function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];if(void 0===t||null==t||""==t||"undefined"==t)return t;for(var i=0;i<o.length;i++){var n=new RegExp("\\{"+i+"\\}","gm");t=t.replace(n,o[i])}return t},x.formatMoney=function(t){return isNaN(t)&&(t=0),t<9999?parseInt(""+t):t<9999999?parseFloat(""+t/1e3).toFixed(2)+"K":t<9999999999?parseFloat(""+t/1e6).toFixed(2)+"M":t<9999999999999?parseFloat(""+t/1e9).toFixed(2)+"G":t<1e16?parseFloat(""+t/1e12).toFixed(2)+"T":t<1e19?parseFloat(""+t/1e15).toFixed(2)+"P":t<1e22?parseFloat(""+t/1e18).toFixed(2)+"E":parseFloat(""+t/1e21).toFixed(2)+"B"},x);function x(){}var L=(O.prototype.schedule=function(t,o){var e=this,i=setInterval(function(){t&&t.apply(e)},1e3*o);console.log("BaseModule schedule ",i),this.mIntervalArr[i]=t},O.prototype.unschedule=function(t){for(var o in this.mIntervalArr)this.mIntervalArr[o]!==t&&!D.isEmpty(this.mIntervalArr[o])||clearInterval(parseInt(o))},O.prototype.scheduleOnce=function(t,o){var e=this,i=setTimeout(function(){clearTimeout(i),t&&t.apply(e)},1e3*o);this.mTimeoutArr[i]=t},O.prototype.unscheduleOnce=function(t){for(var o in this.mTimeoutArr)this.mTimeoutArr[o]!==t&&!D.isEmpty(this.mTimeoutArr[o])||clearTimeout(parseInt(o))},O.prototype.initProperty=function(t){for(var o in t)this.hasOwnProperty(o)&&(this[o]=t[o])},O.prototype.preload=function(t,o){o&&o()},O.prototype._findComponent=function(t,o){for(var e=null,i=0;i<t._components.length;i++){var n=t._components[i];if(n.willHide&&n.willShow){e=n;break}}return e},O.prototype._findComponentByName=function(t,o){return!!t&&(t.name==o||this._findComponentByName(t.$super,o))},O);function O(){this.moduleName="",this.mIntervalArr={},this.mTimeoutArr={}}var _,E=(t(I,_=L),I.prototype.start=function(){},Object.defineProperty(I.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),I.prototype.initForm=function(t){for(var o in this.node=t,this){var e;D.isFunction(this[o])||((e=this.findNodeByName(t,o))&&(this[o]=e),this.mNodeMap.push(o))}for(var i=0;i<this.formComponents.length;i++)this.formComponents[i].initForm(t)},I.prototype.disable=function(){var o=this;this.node=null,this.mNodeMap.forEach(function(t){o[t]=null}),this.formComponents.forEach(function(t){t.disable()}),this.formComponents=[]},I.prototype.findNodeByName=function(t,o){return null},I.prototype.willShow=function(o){(this.mFormData=o)&&this.node&&(o.x&&(this.node.x=o.x),o.y&&(this.node.y=o.y)),this.formComponents.forEach(function(t){t.willShow(o)})},I.prototype.onShow=function(o){this.formComponents.forEach(function(t){t.onShow(o)})},I.prototype.willHide=function(o){this.formComponents.forEach(function(t){t.willHide(o)})},I.prototype.onHide=function(o){this.formComponents.forEach(function(t){t.onHide(o)})},I);function I(){var t=null!==_&&_.apply(this,arguments)||this;return t.formComponents=[],t.mNodeMap=[],t}var P,B=(t(V,P=E),Object.defineProperty(V,"TOUCH_START",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(V,"TOUCH_END",{get:function(){return""},enumerable:!0,configurable:!0}),V);function V(){return null!==P&&P.apply(this,arguments)||this}var R,H=(t(M,R=B),Object.defineProperty(M,"TOUCH_START",{get:function(){return cc.Node.EventType.TOUCH_START},enumerable:!0,configurable:!0}),Object.defineProperty(M,"TOUCH_END",{get:function(){return cc.Node.EventType.TOUCH_END},enumerable:!0,configurable:!0}),Object.defineProperty(M,"TOUCH_CANCEL",{get:function(){return cc.Node.EventType.TOUCH_CANCEL},enumerable:!0,configurable:!0}),M);function M(){return null!==R&&R.apply(this,arguments)||this}var U=(Q.parse=function(t){return h(h({},new Q),t)},Q);function Q(){this.x=0,this.y=0,this.width="canvasWidth",this.height="canvasHeight",this.url="",this.isMask=!1,this.maskUrl="",this.child=null,this.event=[],this.type="",this.active=!0,this.widget=null,this.grid=null,this.zIndex=0,this.stopPropagation=!1}var W,z=(t(j,W=U),j.parse=function(t){return h(h({},new j),t)},j.convertType=function(t){return D.isString(t)?cc.Layout.Type[t]?cc.Layout.Type[t]:cc.Layout.Type.GRID:t},j);function j(){var t=null!==W&&W.apply(this,arguments)||this;return t.layoutType=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,t.startAxis=cc.Layout.AxisDirection.HORIZONTAL,t.left=30,t.top=30,t.right=30,t.bottom=30,t.spacingX=30,t.spacingY=30,t}var G,q=(t(K,G=U),K.parse=function(t){return h(h({},new K),t)},K);function K(t,o,e,i,n,r,a,s){void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=0);var c=G.call(this)||this;return c.isAlignLeft=!1,c.isAlignTop=!1,c.isAlignRight=!1,c.isAlignBottom=!1,c.left=0,c.top=0,c.right=0,c.bottom=0,c.isAlignLeft=t,c.isAlignTop=o,c.isAlignRight=e,c.isAlignBottom=i,c.left=n,c.top=r,c.right=a,c.bottom=s,c}var Z,X=(t(Y,Z=C),Object.defineProperty(Y,"canvasNode",{get:function(){return cc.Canvas.instance.node},enumerable:!0,configurable:!0}),Y.createNode=function(t,o){t=t||this.getNodeName();var e=new cc.Node;return e.name=t,o&&(e.active=o.active,e.zIndex=this.convertIndex(o.zIndex),o.stopPropagation&&this.addStopPropagation(e)),e},Y.createImage=function(t,o){var e=this,i=this.createNode(o.name,o);return i.addComponent(cc.Sprite),this.changeSrc(i,o,function(){i.width=e.convertWidth(o.width),i.height=e.convertHeight(o.height)}),i.width=this.convertWidth(o.width),i.height=this.convertHeight(o.height),i.x=o.x,i.y=o.y,t.addChild(i),i},Y.colorHex2RGB=function(t){"#"==t.substr(0,1)&&(t=t.substring(1)),t=t.toLowerCase();for(var o=new Array,e=0;e<3;e++)o[0]=t.substr(2*e,2),o[3]="0123456789abcdef",o[1]=o[0].substr(0,1),o[2]=o[0].substr(1,1),o[20+e]=16*o[3].indexOf(o[1])+o[3].indexOf(o[2]);return new cc.Color(o[20],o[21],o[22])},Y.createText=function(t,o){var e=this.createNode(o.name,o);e.color=this.colorHex2RGB(o.color);var i=e.addComponent(cc.Label);i.enableWrapText=!1,i.overflow=cc.Label.Overflow.SHRINK,i.fontSize=o.fontSize,i.lineHeight=o.lineHeight;var n=cc.Label.HorizontalAlign[o.horizontalAlign.toUpperCase()];return i.horizontalAlign=n||cc.Label.HorizontalAlign.CENTER,i.verticalAlign=cc.Label.VerticalAlign.CENTER,i.useSystemFont=!0,o.text&&(i.string=o.text),e.x=o.x,e.y=o.y,e.width=this.convertWidth(o.width),e.height=this.convertWidth(o.height),t.addChild(e),e},Y.createLayout=function(t,o){var e=this.createNode(o.name,o),i=e.addComponent(cc.Layout);return i.paddingLeft=o.left,i.paddingTop=o.top,i.paddingRight=o.right,i.paddingBottom=o.bottom,i.spacingX=o.spacingX,i.spacingY=o.spacingY,e.x=o.x,e.y=o.y,e.width=this.convertWidth(o.width),e.height=this.convertWidth(o.height),t.addChild(e),e},Y.createProgressBar=function(t,o){var e,i=this.createNode(o.name,o),n=i.addComponent(cc.ProgressBar);return i.addComponent(cc.Sprite),this.changeSrc(i,o),n.mode=cc.ProgressBar.Mode.HORIZONTAL,n.totalLength=300,n.progress=.1,i.x=o.x,i.y=o.y,i.width=this.convertWidth(o.width),i.height=this.convertWidth(o.height),o.child&&0<o.child.length&&(e=this.createImage(i,U.parse(o.child[0])),n.barSprite=e.getComponent(cc.Sprite)),t.addChild(i),i},Y.createScroll=function(t,o){},Y.createView=function(t,o){var e=this.createImage(t,o);e.width=this.convertWidth(o.scroll.width),e.height=this.convertHeight(o.scroll.height),o.widget&&this.createWidget(e,q.parse(o.widget));var i=this.createNode(o.name+"_scroll",o),n=i.addComponent(cc.ScrollView);n.horizontal=!!o.scroll.horizontal,n.horizontalScrollBar=null,n.verticalScrollBar=null,n.vertical=!n.horizontal,i.width=this.convertWidth(o.scroll.width),i.height=this.convertHeight(o.scroll.height),e.addChild(i);var r=this.createNode(o.name+"_view");r.addComponent(cc.Mask),r.width=this.convertWidth(o.scroll.width),r.height=this.convertHeight(o.scroll.height),i.addChild(r),o.layout.name=o.name+"_layout";var a=this.createLayout(r,z.parse(o.layout));return a.width=this.convertWidth(o.layout.width),a.height=this.convertHeight(o.layout.height),{viewContainer:e,layoutNode:n.content=a}},Y.createWidget=function(t,o){var e=t.addComponent(cc.Widget);return e.isAlignLeft=o.isAlignRight,e.isAlignTop=o.isAlignTop,e.isAlignRight=o.isAlignRight,e.isAlignBottom=o.isAlignBottom,e.left=o.left,e.top=o.top,e.right=o.right,e.bottom=o.bottom,e.updateAlignment(),t},Y.changeSrc=function(t,i,n){var o,r=this,a=t instanceof cc.Node?t.getComponent(cc.Sprite):t;i.url&&(o=-1!=i.url.indexOf("http"),cc.resources?o?cc.assetManager.loadRemote(i.url,cc.SpriteFrame,function(t,o){var e;t?console.log(" cc.assetManager.loadRemote ",t):(e=new cc.SpriteFrame(o),a.spriteFrame=e,r.setSpriteGrid(i,a),n&&n())}):cc.resources.load(i.url,cc.SpriteFrame,function(t,o){t?console.log(" cc.resources.load ",t):(a.spriteFrame=o,r.setSpriteGrid(i,a),n&&n())}):cc.loader.load(i.url,function(t,o){var e;t?console.log(" cc.loader.load ",t):(e=new cc.SpriteFrame(o),a.spriteFrame=e,r.setSpriteGrid(i,a),n&&n())}))},Y.setSpriteGrid=function(t,o){t.grid&&(o.type=cc.Sprite.Type.SLICED,o.spriteFrame.insetLeft=t.grid.left,o.spriteFrame.insetTop=t.grid.top,o.spriteFrame.insetRight=t.grid.right,o.spriteFrame.insetBottom=t.grid.bottom)},Y.changeText=function(t,o){var e;!t||(e=t.getComponent(cc.Label))&&(e.string=o)},Y.createMask=function(t,o){void 0===o&&(o=void 0);var e=F+"/SDK/layout/img_mask.png",i=this.createNode("img_mask"),n=i.addComponent(cc.Sprite),r=i.addComponent(cc.Widget);r.isAlignLeft=r.isAlignTop=r.isAlignRight=r.isAlignBottom=!0,r.left=r.top=r.right=r.bottom=0,this.changeSrc(i,{url:e},function(){n.type=cc.Sprite.Type.SLICED,n.spriteFrame.insetBottom=1,n.spriteFrame.insetTop=1,n.spriteFrame.insetLeft=1,n.spriteFrame.insetRight=1,i.width=t.width,i.height=t.height}),t.addChild(i),i.zIndex=-1,this.addStopPropagation(i)},Y.addStopPropagation=function(t){t.on(H.TOUCH_START,this.onMaskMouseDown,this)},Y.onMaskMouseDown=function(t){t.stopPropagation(),console.log("阻止事件传递, node name ",t.getCurrentTarget().name)},Y.findNodeByName=function(t,o){for(var e=null,i=0;i<t.childrenCount;i++){var n=t.children[i];if(n.name==o){e=n;break}var r=this.findNodeByName(n,o);if(r){e=r;break}}return e},Y.convertWidth=function(t){var o=this.canvasNode.width;return isNaN(t)?o:parseInt(""+t)},Y.convertHeight=function(t){var o=this.canvasNode.height;return isNaN(t)?o:parseInt(""+t)},Y.convertIndex=function(t){return isNaN(t)?0:parseInt(""+t)},Y);function Y(){return null!==Z&&Z.apply(this,arguments)||this}var J,$=(t(tt,J=U),tt.parse=function(t){return h(h({},new tt),t)},tt);function tt(){var t=null!==J&&J.apply(this,arguments)||this;return t.horizontalAlign="center",t.color="#ffffff",t.fontSize=32,t.lineHeight=32,t.text="",t}var ot,et=(t(it,ot=U),it.parse=function(t){return h(h({},new it),t)},it);function it(){var t=null!==ot&&ot.apply(this,arguments)||this;return t.mode=cc.ProgressBar.Mode.HORIZONTAL,t}var nt,rt=(t(at,nt=U),at);function at(){var t=null!==nt&&nt.apply(this,arguments)||this;return t.horizontal=!0,t}var st,ct=(t(ht,st=U),ht.parse=function(t){return h(h({},new ht),t)},ht);function ht(){var t=null!==st&&st.apply(this,arguments)||this;return t.scroll=new rt,t.layout=new z,t}var lt=(ut.image="image",ut.progressBar="progressBar",ut.text="text",ut.layout="layout",ut.view="view",ut.widget="widget",ut);function ut(){}var mt,pt=(t(dt,mt=g),Object.defineProperty(dt,"instance",{get:function(){return this.mInstance||(this.mInstance=new dt),this.mInstance},enumerable:!0,configurable:!0}),dt.prototype._createChild=function(t,o){for(var e=0;e<o.length;e++){var i=o[e];this.createNode(t,i)}},dt.prototype.createNode=function(t,o){var e=null,i=null;return o.type==lt.progressBar?(i=et.parse(o),e=X.createProgressBar(t,i),i.child&&1<i.child.length&&(i.child.splice(0,1),this._createChild(e,i.child))):o.type==lt.view?(i=ct.parse(o),e=X.createView(t,i).viewContainer,i.child&&0<i.child.length&&(this._createChild(e,i.child),console.log(""))):(e=o.type==lt.text?(i=$.parse(o),X.createText(t,i)):o.type==lt.layout?(i=z.parse(o),X.createLayout(t,i)):o.type==lt.widget?(i=q.parse(o),X.createWidget(t,i)):(i=U.parse(o),X.createImage(t,i)),o.widget&&X.createWidget(e,q.parse(o.widget)),i.child&&0<i.child.length&&this._createChild(e,i.child)),e},dt.prototype._createUINode=function(t,o,e,i){i=i||X.canvasNode;var n=this.createNode(i,t),r=new o;return r.initForm(n),r.willShow(e),n.active=!0,r.onShow(n),g.addForm2Quene(t.name,n,r),n},dt.prototype.hideFormByLogic=function(t,o){g.removeFormByLogic(t,function(t){t instanceof Array?t.forEach(function(t){t.formLogic.willHide(o),t.formNode.active=!1,t.formLogic.onHide(o)}):(t.formLogic.willHide(o),t.formNode.active=!1,t.formLogic.onHide(o))})},dt.prototype.hideForm=function(t,o,e){o?g.removeFormFromQuene(t,o,function(t){t.formLogic.willHide(e),t.formNode.active=!1,t.formLogic.onHide(e)}):g.removeAllFormFromQuene(t,function(t){t.formLogic.willHide(e),t.formNode.active=!1,t.formLogic.onHide(e)})},dt.prototype.showForm=function(e,i,n,r,a,t,o){var s=this;void 0===t&&(t=!0),void 0===o&&(o=null),r=r||X.canvasNode;var c=g.getFormFromCached(e);c?(r.addChild(c.formNode),c.formLogic.willShow(n),c.formNode.active=!0,c.formLogic.onShow(n),g.addForm2Quene(e,c)):t?this.getLayout(function(t){var o;t[e]&&((o=t[e]).name=e,s._createUINode(o,i,n,r),console.log("_createUINode ",Date.now()),a&&a())}):(this._createUINode(o,i,n),a&&a())},dt.prototype.createNodeByTemplate=function(i,n,r,a,t,o){var s=this;void 0===t&&(t=!0),void 0===o&&(o=null),a=a||X.canvasNode;var e=g.getFormFromCached(i);e?(a.addChild(e.formNode),e.formLogic.willShow(r),e.formNode.active=!0,e.formLogic.onShow(r),g.addForm2Quene(i,e)):t?this.getTemplates(function(t){var o,e=t[i];e&&((o=U.parse(e)).name=i,s._createUINode(o,n,r,a))}):this._createUINode(o,n,r)},dt.prototype.hideNodeByTemplate=function(t,o,e){o?g.removeFormFromQuene(t,o,function(t){t.formLogic.willHide(e),t.formNode.active=!1,t.formLogic.onHide(e)}):g.removeAllFormFromQuene(t,function(t){t.formLogic.willHide(e),t.formNode.active=!1,t.formLogic.onHide(e)})},dt);function dt(){return null!==mt&&mt.apply(this,arguments)||this}var ft,yt=(t(vt,ft=E),vt.prototype.downAnim=function(t){t.scale=1,t.runAction(cc.sequence(cc.scaleTo(.1,.7,.7),cc.callFunc(function(){},this)))},vt.prototype.upAnim=function(t,o){var e=this;t.stopAllActions(),t.scale=.7,t.runAction(cc.sequence(cc.scaleTo(.1,1,1),cc.callFunc(function(){e.mDowning=!1,o&&o()},this)))},vt.prototype.onTouchStart=function(t){console.log("onMouseDown"),this.downAnim(t.getCurrentTarget()),this.mDowning||(this.mDowning=!0)},vt.prototype.onTouchEnd=function(t){var o=this;console.log("onMouseUp"),this.upAnim(t.getCurrentTarget(),function(){o.mClickQuene[t.getCurrentTarget().uuid]&&o.mClickQuene[t.getCurrentTarget().uuid]()})},vt.prototype.onTouchCancel=function(t){this.upAnim(t.getCurrentTarget())},vt.prototype.applyClickAnim=function(t,o){t&&t.uuid?(this.mClickQuene[t.uuid]=o,t.on(H.TOUCH_START,this.onTouchStart,this),t.on(H.TOUCH_END,this.onTouchEnd,this),t.on(H.TOUCH_CANCEL,this.onTouchCancel,this)):console.log("缺少对象，无法绑定事件")},vt.prototype.removeClickAnim=function(t){t&&t.uuid&&(this.mClickQuene[t.uuid]=null,delete this.mClickQuene[t.uuid],t.off(H.TOUCH_START,this.onTouchStart,this),t.off(H.TOUCH_END,this.onTouchEnd,this),t.off(H.TOUCH_CANCEL,this.onTouchCancel,this))},vt.prototype.findNodeByName=function(t,o){return X.findNodeByName(t,o)},vt.prototype.hideForm=function(){this.FormData.hideForm&&pt.instance.hideFormByLogic(this)},vt);function vt(){var t=null!==ft&&ft.apply(this,arguments)||this;return t.mDowning=!1,t.mClickQuene={},t}var gt,wt=(t(Ct,gt=yt),Object.defineProperty(Ct.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Ct.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnBack,function(){t.onBack()})},Ct.prototype.removeListener=function(){this.removeClickAnim(this.btnBack)},Ct.prototype.willShow=function(t){gt.prototype.willShow.call(this,t),moosnow.platform.stopRecord(function(){var o=moosnow.platform.getSystemInfoSync();moosnow.http.getAllConfig(function(t){moosnow.platform.showShareButton({left:o.windowWidth-t.shareBtnWidth,top:o.windowHeight-70})}),moosnow.platform.hideBanner(),moosnow.platform.hideShareButton()})},Ct.prototype.onShow=function(t){this.addListener()},Ct.prototype.willHide=function(){this.removeListener()},Ct.prototype.onBack=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},Ct);function Ct(){var t=null!==gt&&gt.apply(this,arguments)||this;return t.btnBack=null,t}var Nt,bt=(t(At,Nt=yt),At.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnContinue,function(){t.onContinue()}),this.applyClickAnim(this.btnHome,function(){t.onToHome()}),this.applyClickAnim(this.btnReplay,function(){t.onReplay()})},At.prototype.removeListener=function(){this.removeClickAnim(this.btnContinue),this.removeClickAnim(this.btnHome),this.removeClickAnim(this.btnReplay)},At.prototype.willShow=function(t){this.addListener(),moosnow.platform.hideBanner()},At.prototype.willHide=function(t){this.removeListener()},At.prototype.onShow=function(){moosnow.platform.pauseRecord()},At.prototype.onContinue=function(){pt.instance.hideForm("pauseForm",null,null)},At.prototype.onToHome=function(){moosnow.platform.stopRecord()},At.prototype.onReplay=function(){moosnow.platform.stopRecord(function(){moosnow.platform.startRecord()})},At);function At(){var t=null!==Nt&&Nt.apply(this,arguments)||this;return t.btnContinue=null,t.btnHome=null,t.btnReplay=null,t.isMask=!1,t}var Ft=(Tt.randomNumBoth=function(t,o){var e=o-t,i=Math.random();return t+Math.round(i*e)},Tt.probabilitys=function(t){for(var o=0,e=function(){for(var t=0,o=0,e=arguments.length;o<e;o++)t+=arguments[o].length;for(var i=Array(t),n=0,o=0;o<e;o++)for(var r=arguments[o],a=0,s=r.length;a<s;a++,n++)i[n]=r[a];return i}(t),i=0,n=0;n<e.length;n++)i+=e[n];if(100!=i)throw"所有概率值总和不等于100%";for(var r=new Array,n=0;n<e.length;n++){for(var a=e[n],s=0;s<a;s++)r.push(o);o++}return r[this.randomNumBoth(0,99)]},Tt);function Tt(){}var St,kt=(t(Dt,St=yt),Dt);function Dt(){return null!==St&&St.apply(this,arguments)||this}var xt,Lt="__video_end",Ot="__video_not_end",_t="__video_error",Et="视频正在加载中,请稍后",It="请完整观看完视频！",Pt=(t(Bt,xt=kt),Bt.prototype.initForm=function(t){xt.prototype.initForm.call(this,t)},Bt.prototype.addListener=function(){var t=this;this[this.uncheckedName]||console.log("unchecked node is null"),this[this.checkedName]||console.log("checked node is null"),this.applyClickAnim(this[this.uncheckedName],function(){t.checkToggle(!0)}),this.applyClickAnim(this[this.checkedName],function(){t.checkToggle(!0)})},Bt.prototype.removeListener=function(){this.removeClickAnim(this[this.checkedName]),this.removeClickAnim(this[this.uncheckedName])},Bt.prototype.onReceive=function(){var o=this;this.mCheckedVideo?moosnow.platform.showVideo(function(t){t==Lt?o.FormData.videoCallback&&o.FormData.videoCallback():t==_t?moosnow.form.showToast(Et):moosnow.form.showToast(It)}):this.FormData.callback&&this.FormData.callback()},Bt.prototype.checkToggle=function(t){if(void 0===t&&(t=!1),t&&this.mCheckBoxMistouch)return this.mClickNum++,this.mClickNum==this.mVideoNum&&moosnow.platform.showVideo(function(){}),void(this.mClickNum>=this.mCanNum&&(this.mCheckedVideo=!this.mCheckedVideo,this[this.checkedName].active=this.mCheckedVideo,this[this.uncheckedName].active=!this.mCheckedVideo,this.checkCallback()));this.mCheckedVideo=!this.mCheckedVideo,this[this.checkedName].active=this.mCheckedVideo,this[this.uncheckedName].active=!this.mCheckedVideo,this.checkCallback()},Bt.prototype.onShow=function(t){var o=this;xt.prototype.onShow.call(this,t),moosnow.http.getAllConfig(function(t){o.mCanNum=Ft.probabilitys(t.checkBoxProbabilitys)+1,o.mCheckBoxMistouch=1==t.checkBoxMistouch}),this.addListener(),this.mCheckedVideo=!0,this[this.checkedName].active=this.mCheckedVideo,this[this.uncheckedName].active=!this.mCheckedVideo,this.checkCallback()},Bt.prototype.checkCallback=function(){this.toggleCallback&&this.toggleCallback(this.mCheckedVideo)},Bt.prototype.willHide=function(){this.removeListener()},Bt);function Bt(t,o,e,i){var n=xt.call(this)||this;return n.checkedName="checked",n.uncheckedName="unchecked",n.mCheckedVideo=!0,n.mCanNum=0,n.mCheckBoxMistouch=!1,n.mClickNum=0,n.mVideoNum=4,n.toggleCallback=o,n.mCheckedVideo=t,e&&(n.checkedName=e),i&&(n.uncheckedName=i),n[n.checkedName]=null,n[n.uncheckedName]=null,n}var Vt,Rt=(t(Ht,Vt=yt),Object.defineProperty(Ht.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Ht.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnContinue,function(){t.onReceive()})},Ht.prototype.removeListener=function(){this.removeClickAnim(this.btnContinue)},Ht.prototype.onReceive=function(){var o=this;this.mCheckedVideo?moosnow.platform.showVideo(function(t){t==moosnow.VIDEO_STATUS.END?(o.hideForm(),o.FormData.videoCallback&&o.FormData.videoCallback()):t==moosnow.VIDEO_STATUS.ERR?moosnow.form.showToast(Et):moosnow.form.showToast(It)}):this.FormData.callback&&this.FormData.callback()},Ht.prototype.onShow=function(t){Vt.prototype.onShow.call(this,t),this.mLevelCoinNum=this.FormData.coinNum,this.mLevelShareCoinNum=this.FormData.coinNum,this.videoText.getComponent(cc.Label).string=""+this.FormData.videoText,this.coinNum.getComponent(cc.Label).string=""+D.formatMoney(this.mLevelCoinNum),this.addListener(),moosnow.platform.stopRecord(),moosnow.platform.showBanner()},Ht.prototype.willHide=function(t){Vt.prototype.willHide.call(this,t),this.removeListener(),moosnow.platform.hideBanner()},Ht);function Ht(){var o=null!==Vt&&Vt.apply(this,arguments)||this;return o.checked=null,o.unchecked=null,o.btnContinue=null,o.coinNum=null,o.videoText=null,o.mCheckedVideo=!1,o.formComponents=[new Pt(o.mCheckedVideo,function(t){o.mCheckedVideo=t})],o.mLevelCoinNum=0,o.mLevelShareCoinNum=0,o}var Mt,Ut=(t(Qt,Mt=yt),Qt.prototype.onMaskMouseDown=function(t){t.stopPropagation()},Qt.prototype.willShow=function(t){Mt.prototype.willShow.call(this),this.node.on(H.TOUCH_START,this.onMaskMouseDown,this),this.node.zIndex=cc.macro.MAX_ZINDEX,this.msgText.getComponent(cc.Label).string=t,this.node.active=!0,this.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1))),this.scheduleOnce(this.hide,1)},Qt.prototype.willHide=function(t){Mt.prototype.willHide.call(this,t),this.node.off(H.TOUCH_START,this.onMaskMouseDown,this)},Qt.prototype.hide=function(){pt.instance.hideForm("toastForm",null)},Qt);function Qt(){var t=null!==Mt&&Mt.apply(this,arguments)||this;return t.msgText=null,t}var Wt,zt=(t(jt,Wt=yt),Object.defineProperty(jt.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),jt.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnVideo,function(){t.onVideoTry()}),this.applyClickAnim(this.btnNext,function(){t.onNext()}),this.applyClickAnim(this.btnTry,function(){t.onTextTry()})},jt.prototype.removeListener=function(){this.removeClickAnim(this.btnVideo),this.removeClickAnim(this.btnNext),this.removeClickAnim(this.btnTry)},jt.prototype.onShow=function(t){Wt.prototype.onShow.call(this,t),X.changeSrc(this.logo,{url:this.FormData.skinUrl}),this.addListener()},jt.prototype.onHide=function(t){Wt.prototype.onHide.call(this,t),this.removeListener()},jt.prototype.onVideoTry=function(){var o=this;moosnow.platform.showVideo(function(t){t==Lt?(o.hideForm(),o.FormData.videoCallback&&o.FormData.videoCallback()):t==_t?moosnow.form.showToast(Et):t==Ot&&moosnow.form.showToast(It)})},jt.prototype.onNext=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},jt.prototype.onTextTry=function(){this.mCheckedVideo?this.onVideoTry():this.onNext()},jt);function jt(){var o=null!==Wt&&Wt.apply(this,arguments)||this;return o.logo=null,o.btnVideo=null,o.btnNext=null,o.btnTry=null,o.mCheckedVideo=!1,o.formComponents=[new Pt(o.mCheckedVideo,function(t){o.mCheckedVideo=t,o.btnNext&&(o.btnNext.active=t),o.btnTry&&(o.btnTry.active=!t)})],o}var Gt,qt=(t(Kt,Gt=yt),Object.defineProperty(Kt.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Kt.prototype.addListener=function(){this.node.on(H.TOUCH_END,this.hideForm,this)},Kt.prototype.removeListener=function(){this.node.off(H.TOUCH_END,this.hideForm,this)},Kt.prototype.willShow=function(t){Gt.prototype.willShow.call(this,t),this.addListener()},Kt.prototype.willHide=function(t){Gt.prototype.willShow.call(this,t),this.removeListener()},Kt.prototype.vibrateSwitch=function(t){moosnow.data.setVibrateSetting(t),this.FormData.vibrateCallback&&this.FormData.vibrateCallback(t)},Kt.prototype.musicSwitch=function(t){moosnow.audio.isMute=t,this.FormData.musicCallback&&this.FormData.musicCallback(t)},Kt);function Kt(){var o=null!==Gt&&Gt.apply(this,arguments)||this;return o.formComponents=[new Pt(moosnow.data.getVibrateSetting(),function(t){o.vibrateSwitch(t)},"vibrateOn","vibrateOff"),new Pt(moosnow.audio.isMute,function(t){o.musicSwitch(t)},"musicOn","musicOff")],o}var Zt,Xt=(t(Yt,Zt=yt),Object.defineProperty(Yt.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),Yt.prototype.willShow=function(t){Zt.prototype.willShow.call(this,t),this.initItem(t),this.addListener()},Yt.prototype.willHide=function(t){Zt.prototype.willHide.call(this,t),this.removeListener()},Yt.prototype.addListener=function(){var t=this;this.applyClickAnim(this.node,function(){t.onCheck()}),moosnow.event.addListener(n.PRIZE_BOX_UNLOCAK,this,this.onCheckChange)},Yt.prototype.removeListener=function(){this.removeClickAnim(this.node),moosnow.event.removeListener(n.PRIZE_BOX_UNLOCAK,this)},Yt.prototype.initItem=function(t){this.coinNum.active=0<t.coinNum;var o=moosnow.data.getUserPrizeBoxById(t.idx);o?(this.coinNum.getComponent(cc.Label).string=""+D.formatMoney(o.coinNum),this.opend.active=!0,this.lockd.active=!1,this.video.active=!1):(this.opend.active=!1,this.lockd.active=!0,this.video.active=this.FormData.isVideo),this.checkdBg.active=!1},Yt.prototype.onCheckChange=function(t){var o=moosnow.data.getUserPrizeBoxById(this.FormData.idx);o?(this.coinNum.active=!0,this.coinNum.getComponent(cc.Label).string=""+D.formatMoney(o.coinNum),this.opend.active=!0,this.lockd.active=!1,this.video.active=!1):(this.coinNum.active=!1,this.video.active=this.FormData.isVideo,this.opend.active=!1,this.lockd.active=!0)},Yt.prototype.onCheck=function(){var o=this;this._opening||(this._opening=!0,this.FormData.videoNum?moosnow.platform.showVideo(function(t){switch(o._opening=!1,t){case Ot:moosnow.form.showToast(It);break;case _t:moosnow.form.showToast(Et);break;case Lt:moosnow.data.lockPrizeBox(o.FormData.idx,1,o.FormData.coinNum),moosnow.event.sendEventImmediately(n.PRIZE_BOX_UNLOCAK,o.FormData)}}):(0<moosnow.data.getPrizeKey()?(moosnow.data.addPrizeKey(-1),moosnow.data.lockPrizeBox(this.FormData.idx,0,this.FormData.coinNum)):(this._opening=!1,moosnow.form.showToast("钥匙不足")),moosnow.event.sendEventImmediately(n.PRIZE_BOX_UNLOCAK,this.FormData)))},Yt);function Yt(){var t=null!==Zt&&Zt.apply(this,arguments)||this;return t.checkdBg=null,t.opend=null,t.lockd=null,t.video=null,t.coinNum=null,t._opening=!1,t}var Jt,$t=(t(to,Jt=yt),Object.defineProperty(to.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),to.prototype.onShow=function(t){console.log("this.mTryFromVideo 1 ",this.mTryFromVideo),Jt.prototype.onShow.call(this,t),this.boxLayout.getComponent(cc.Layout).type=cc.Layout.Type.GRID,console.log("this.mTryFromVideo 2 ",this.mTryFromVideo),this.btnNext.active=!this.mTryFromVideo,this.btnReceive.active=this.mTryFromVideo;for(var o=0,e=0;e<this.FormData.rowNum;e++)for(var i=0;i<this.FormData.colNum;i++){var n=D.randomNumBoth(this.FormData.coinNum[0],this.FormData.coinNum[1]),r=D.randomNumBoth(this.FormData.videoCoinNum[0],this.FormData.videoCoinNum[1]),a=this.FormData.videoNum&&-1!=this.FormData.videoNum.indexOf(o);pt.instance.createNodeByTemplate("boxItem",Xt,{coinNum:n,videoCoinNum:r,isVideo:a,idx:o},this.boxLayout),o++}this.addListener(),this.updateKeyNum()},to.prototype.onHide=function(t){Jt.prototype.onHide.call(this,t),pt.instance.hideNodeByTemplate("boxItem",null),this.removeListener()},to.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnNext,function(){t.nextForm()}),this.applyClickAnim(this.btnReceive,function(){t.onReceive()}),moosnow.event.addListener(n.PRIZE_BOX_UNLOCAK,this,this.onPrizeBoxUnLock)},to.prototype.removeListener=function(){this.removeClickAnim(this.btnNext),this.removeClickAnim(this.btnReceive),moosnow.event.removeListener(n.PRIZE_BOX_UNLOCAK,this)},to.prototype.onPrizeBoxUnLock=function(t){this.btnReceive.active=!0,this.updateKeyNum(),this.FormData.openCallback&&this.FormData.openCallback(t.coinNum)},to.prototype.onReceive=function(){var o=this;this._Receiveing||(this._Receiveing=!0,this.mTryFromVideo?moosnow.platform.showVideo(function(t){switch(t){case moosnow.VIDEO_STATUS.NOTEND:o._Receiveing=!1,moosnow.form.showToast(moosnow.VIDEO_MSG.NOTEND);break;case moosnow.VIDEO_STATUS.ERR:o._Receiveing=!1,moosnow.form.showToast(moosnow.VIDEO_MSG.ERR);break;case moosnow.VIDEO_STATUS.END:moosnow.data.addPrizeKey(3),o.updateKeyNum()}}):this.nextForm())},to.prototype.nextForm=function(){moosnow.data.clearPrizeBox(),moosnow.data.clearPrizeKey(),this._Receiveing=!1,this.hideForm(),this.FormData.callback&&this.FormData.callback()},to.prototype.updateKeyNum=function(){this.keyNum.getComponent(cc.Label).string=""+moosnow.data.getPrizeKey()},to);function to(){var o=null!==Jt&&Jt.apply(this,arguments)||this;return o.boxLayout=null,o.btnReceive=null,o.btnNext=null,o.keyNum=null,o.mTryFromVideo=!0,o.formComponents=[new Pt(o.mTryFromVideo,function(t){o.mTryFromVideo=t,o.btnNext.active=!t,o.btnReceive.active=t})],o._Receiveing=!1,o}var oo,eo=(t(io,oo=yt),Object.defineProperty(io.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),io.prototype.onShow=function(t){oo.prototype.onShow.call(this,t),this.addListener(),this.coinNum.getComponent(cc.Label).string=""+D.formatMoney(this.FormData.shareCoinNum)},io.prototype.onHide=function(t){oo.prototype.onHide.call(this,t),this.removeListener()},io.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnShare,function(){t.onShareVideo()}),this.applyClickAnim(this.btnNext,function(){t.onNext()})},io.prototype.removeListener=function(){this.removeClickAnim(this.btnShare),this.removeClickAnim(this.btnNext)},io.prototype.onNext=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},io.prototype.onShareVideo=function(){var e=this;moosnow.http.getAllConfig(function(t){var o;t&&1!=t.shareFormVideo?2==t.shareFormVideo?e.onShare():(o=t&&t.shareFormVideoPrecent?parseFloat(t.shareFormVideoPrecent):.5,D.randomNumBoth(0,100)/100<o?e.onVideo():e.onShare()):e.onVideo()})},io.prototype.onVideo=function(){var o=this;moosnow.platform.showVideo(function(t){t==moosnow.VIDEO_STATUS.END?(o.hideForm(),o.FormData.shareCallback&&o.FormData.shareCallback(!0)):t==moosnow.VIDEO_STATUS.NOTEND?moosnow.form.showToast(moosnow.VIDEO_MSG.NOTEND):moosnow.form.showToast(moosnow.VIDEO_MSG.ERR)})},io.prototype.onShare=function(){var o=this;moosnow.platform.share({channel:moosnow.SHARE_CHANNEL.VIDEO},function(t){o.hideForm(),o.FormData.shareCallback&&o.FormData.shareCallback(t),console.log("分享结束",t)},function(t){o.hideForm(),o.FormData.shareCallback&&o.FormData.shareCallback(t)})},io);function io(){var t=null!==oo&&oo.apply(this,arguments)||this;return t.btnShare=null,t.btnNext=null,t.coinNum=null,t}var no,ro=(t(ao,no=yt),ao.prototype.addEvent=function(){this.btnReceive.on(H.TOUCH_START,this.onLogoUp,this),this.btnReceive.on(H.TOUCH_END,this.onBannerClick,this)},ao.prototype.removeEvent=function(){this.btnReceive.off(H.TOUCH_START,this.onLogoUp,this),this.btnReceive.off(H.TOUCH_END,this.onBannerClick,this),moosnow.event.removeListener(n.ON_PLATFORM_SHOW,this)},ao.prototype.onLogoUp=function(){this.logo.position=this.mEndPos},ao.prototype.onLogoDown=function(){this.logo.position=this.mBeginPos},ao.prototype.initPos=function(){this.mBeginPos=this.logo.position.clone(),this.mEndPos=this.mBeginPos.add(new cc.Vec2(0,50))},Object.defineProperty(ao.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),ao.prototype.willShow=function(t){var o=this;no.prototype.willShow.call(this,t),this.btnReceive.active=!0,this.initPos(),this.mCurrentNum=0,this.mNavigateIndex=D.randomNumBoth(3,this.mMaxNum-2),this.addEvent(),this.schedule(this.subProgress,.1),moosnow.form.showAd(r,null),this.mBannerShow=!1,moosnow.http.getAllConfig(function(t){o.mBannerClickType=t.bannerClickType}),this.schedule(this.onFwUpdate,.1)},ao.prototype.willHide=function(){this.unschedule(this.subProgress),this.unschedule(this.resetProgress),this.removeEvent(),this.unschedule(this.onFwUpdate)},ao.prototype.subProgress=function(){this.mCurrentNum-=.1,this.mCurrentNum<0&&(this.mCurrentNum=0)},ao.prototype.bannerClickCallback=function(t){t&&(this.unschedule(this.onHideBanner),this.unschedule(this.resetProgress),moosnow.platform.hideBanner(),this.mBannerShow=!1,this.FormData&&this.FormData.callback&&this.FormData.callback())},ao.prototype.onBannerClick=function(){var o=this;this.onLogoDown(),this.mCurrentNum+=1,this.mCurrentNum>=this.mNavigateIndex&&(this.mBannerShow||(this.mShowTime=Date.now(),this.mBannerShow=!0,moosnow.platform.showBanner(!0,function(t){console.log("banner click callback ",t),o.bannerClickCallback(t)}),1==this.mBannerClickType?(this.unschedule(this.onHideBanner),this.scheduleOnce(this.onHideBanner,2)):2==this.mBannerClickType&&(this.unschedule(this.resetProgress),this.scheduleOnce(this.resetProgress,2)))),this.mCurrentNum>=this.mMaxNum&&(moosnow.platform.hideBanner(),this.mBannerShow=!1,this.hideForm(),this.FormData&&this.FormData.callback&&this.FormData.callback(!0))},ao.prototype.resetProgress=function(){this.mCurrentNum=0,moosnow.platform.hideBanner(),this.mBannerShow=!1},ao.prototype.onHideBanner=function(){moosnow.platform.hideBanner()},ao.prototype.onFwUpdate=function(){this.clickProgress.getComponent(cc.ProgressBar).progress=this.mCurrentNum/this.mMaxNum},ao);function ao(){var t=null!==no&&no.apply(this,arguments)||this;return t.clickProgress=null,t.btnReceive=null,t.logo=null,t.mMaxNum=10,t.mCurrentNum=0,t.mNavigateIndex=0,t.mBannerShow=!1,t.mShowTime=0,t.mBannerClickType=0,t}var so,co=(t(ho,so=yt),ho.prototype.addListener=function(){this.logo.on(H.TOUCH_END,this.onClickAd,this)},ho.prototype.removeListener=function(){this.logo.off(H.TOUCH_END,this.onClickAd,this)},ho.prototype.initPosition=function(t){},ho.prototype.willShow=function(t){so.prototype.willShow.call(this,t),this.mAdItem=t,this.updateUI(),this.addListener()},ho.prototype.refreshImg=function(t){this.mAdItem=t,this.updateUI()},ho.prototype.updateUI=function(){var t=this,o=this.logo,e=o.width,i=o.height;X.changeSrc(this.logo,{url:this.mAdItem.img},function(){t.logo.width=e,t.logo.height=i}),X.changeText(this.title,this.mAdItem.title)},ho.prototype.onClickAd=function(){var t,o=this,e=this.mAdItem;this.FormData.refresh&&((t=this.findNextAd()).refresh&&moosnow.event.sendEventImmediately(n.AD_VIEW_REFRESH,{current:e,next:t}),this.refreshImg(t)),moosnow.platform.navigate2Mini(e,function(){},function(){o.mAdItem.onCancel&&o.mAdItem.onCancel(e)})},ho.prototype.findNextAd=function(){if(!this.FormData.source)return null;if(!this.FormData.showIds)return null;for(var t=0;t<this.FormData.source.length;t++){for(var o=!1,e=0;e<this.FormData.showIds.length;e++)this.FormData.showIds[e].appid==this.FormData.source[t].appid&&this.FormData.showIds[e].position==this.FormData.source[t].position&&(o=!0);if(!o)return this.FormData.source[t]}return null},ho.prototype.onAdViewChange=function(t){if(this.FormData.showIds&&this.FormData.source){for(var o=t.current,e=t.next,i=this.FormData.showIds,n=this.FormData.source,r=0;r<i.length;r++)o.appid==i[r].appid&&o.position==i[r].position&&(this.FormData.showIds[r]=e.appid);for(r=0;r<n.length;r++)if(e.appid==n[r].appid){this.FormData.source.splice(r,1),this.FormData.source.push(o);break}}},ho.prototype.onShow=function(t){so.prototype.onShow.call(this,t),moosnow.event.addListener(n.AD_VIEW_REFRESH,this,this.onAdViewChange)},ho.prototype.onHide=function(t){so.prototype.onHide.call(this,t),this.mAdItem&&(this.mAdItem.onCancel=null),this.removeListener(),moosnow.event.removeListener(n.AD_VIEW_REFRESH,this)},ho);function ho(){var t=null!==so&&so.apply(this,arguments)||this;return t.logo=null,t.title=null,t.animLogo=null,t.nameBg=null,t}var lo,uo=(t(mo,lo=yt),mo.prototype.addListener=function(){this.btnBack&&this.btnBack.on(H.TOUCH_END,this.onBack,this),this.exportClose&&this.exportClose.on(H.TOUCH_END,this.onNavigate,this),this.btnSideShow&&this.btnSideShow.on(H.TOUCH_END,this.sideOut,this),this.btnSideHide&&this.btnSideHide.on(H.TOUCH_END,this.sideIn,this),moosnow.event.addListener(n.AD_VIEW_CHANGE,this,this.onAdChange)},mo.prototype.removeListener=function(){this.btnBack&&this.btnBack.off(H.TOUCH_END,this.onBack,this),this.exportClose&&this.exportClose.off(H.TOUCH_END,this.onNavigate,this),this.btnSideShow&&this.btnSideShow.off(H.TOUCH_END,this.sideOut,this),this.btnSideHide&&this.btnSideHide.off(H.TOUCH_END,this.sideIn,this),moosnow.event.removeListener(n.AD_VIEW_CHANGE,this)},mo.prototype.onAdChange=function(t){t.showAd!=d&&(this.mPrevShowAd=this.mShowAd,this.mPrevBackCall=this.mBackCall),t.showAd==d&&(t.showAd=this.mPrevShowAd,t.callback=this.mPrevBackCall),this.displayChange(t.showAd,t.callback),isNaN(t.zIndex)?this.node.zIndex=cc.macro.MAX_ZINDEX:this.node.zIndex=t.zIndex},mo.prototype.onBack=function(){this.mBackCall&&this.mBackCall()},Object.defineProperty(mo.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),mo.prototype.loadAd=function(o){var e=this;this.mAdData?o(this.mAdData.indexLeft):(this.loadNum=0,pt.instance.getLayout(function(){e.checkLoad(o)}),pt.instance.getTemplates(function(){e.checkLoad(o)}),moosnow.ad.getAd(function(t){e.mAdData=t,e.checkLoad(o)}))},mo.prototype.checkLoad=function(t){this.loadNum++,this.loadNum==this.loadManNum&&t(this.mAdData.indexLeft)},mo.prototype.onRandomNavigate=function(){var t=this.mAdData.indexLeft[D.randomNumBoth(0,this.mAdData.indexLeft.length-1)];moosnow.platform.navigate2Mini(t,function(){},function(){})},mo.prototype.onNavigate=function(){var o=this;moosnow.http.getAllConfig(function(t){t&&1==t.exportBtnNavigate?o.onRandomNavigate():o.onBack()})},mo.prototype.floatAnim=function(){this.floatRuning||(this.floatContainer.childrenCount>=this.FormData.floatPositon.length&&(this.floatRuning=!0),this.floatContainer.children.forEach(function(t){t.stopAllActions(),t.runAction(cc.sequence(cc.rotateTo(.3,10),cc.rotateTo(.6,-10),cc.rotateTo(.3,0),cc.scaleTo(.3,.8),cc.scaleTo(.3,1)).repeatForever())}))},mo.prototype.sideOut=function(){var t=this,o=moosnow.platform.getSystemInfoSync(),e=0,i=0;o&&(e=o.statusBarHeight||0,i=o.notchHeight||0),this.sideView.node.runAction(cc.sequence(cc.moveTo(1,e+i+this.sideView.node.width+20,0),cc.callFunc(function(){t.btnSideShow.active=!1,t.btnSideHide.active=!0})))},mo.prototype.sideIn=function(){var t=this;this.sideView.node.runAction(cc.sequence(cc.moveTo(1,0,0),cc.callFunc(function(){t.btnSideShow.active=!0,t.btnSideHide.active=!1})))},mo.prototype.pushScroll=function(t,o){o.type==cc.Layout.Type.GRID?t.vertical?this.mScrollVec.push({scrollView:t,move2Up:!1}):this.mScrollVec.push({scrollView:t,move2Left:!1}):o.type==cc.Layout.Type.HORIZONTAL?this.mScrollVec.push({scrollView:t,move2Left:!1}):o.type==cc.Layout.Type.VERTICAL&&this.mScrollVec.push({scrollView:t,move2Up:!1})},mo.prototype.addAd=function(t){this.mShowAd|=t},mo.prototype.removeAd=function(t){this.hasAd(t)&&(this.mShowAd^=t)},mo.prototype.hasAd=function(t){return(this.mShowAd&t)==t},mo.prototype.showClose=function(t){this.exportClose.active=!1,this.exportCloseTxt.active=!1,this.btnBack.active=!1,this.unschedule(this.onWaitShow),t&&this.hasAd(c)?this.hasAd(l)?(this.mSecond=3,this.onWaitShow(),this.schedule(this.onWaitShow,1)):(this.exportClose.active=!0,this.btnBack.active=!0,this.exportCloseTxt.active=!1):(this.exportClose.active=!1,this.btnBack.active=!1,this.exportCloseTxt.active=!1)},mo.prototype.onWaitShow=function(){if(--this.mSecond,this.exportCloseTxt.active=!0,this.mSecond<=0)return this.exportClose.active=!0,this.btnBack.active=!0,this.exportCloseTxt.active=!1,void this.unschedule(this.onWaitShow);X.changeText(this.exportCloseTxt,"剩余"+this.mSecond+"秒可关闭")},mo.prototype.setPosition=function(t,o,e,i){void 0===o&&(o=""),void 0===i&&(i=!1);var n=D.deepCopy(t);return n.forEach(function(t){t.position=o,t.onCancel=e,t.refresh=i}),n},mo.prototype.initFloatAd=function(t){var r,a,s=this;0!=this.mAdData.indexLeft.length&&(r=this.setPosition(this.mAdData.indexLeft,"浮动ICON",t,!0),a=[],this.FormData.floatPositon.forEach(function(t,o){var e=o;e>r.length-1&&(e=0);var i=r[e];a.push({appid:i.appid,position:i.position,index:o});var n=s.FormData.floatTempletes.length-1>o?s.FormData.floatTempletes[o]:s.FormData.floatTempletes[0];console.log("initFloatAd",t.x,t.y),i.x=t.x,i.y=t.y,i.source=r,i.showIds=a,pt.instance.createNodeByTemplate(n,co,i,s.floatContainer)}),this.updateFloat(r),this.schedule(function(){s.updateFloat(r)},this.mFloatRefresh))},mo.prototype.updateFloat=function(t){for(var o in this.mFloatCache){var e=this.mFloatCache[o].index,i=this.mFloatCache[o].logic;e<this.mAdData.indexLeft.length-1?e++:e=0,this.mFloatCache[o].index=e,i.refreshImg(h(h({},this.mAdData.indexLeft[e]),{onCancel:this.mFloatCache[o].onCancel}))}},mo.prototype.initFiexdView=function(e,t,i,o){pt.instance.hideNodeByTemplate(i,null),e.removeAllChildren();for(var n=this.setPosition(this.mAdData.indexLeft,t,o,!0),r=[],a=[],s=0;s<8;s++){var c=n.length>s?n[s]:n[0];a.push({appid:c.appid,position:c.position,index:s}),r.push(c)}r.forEach(function(t){var o=h(h({},t),{showIds:a,source:n});pt.instance.createNodeByTemplate(i,co,o,e)})},mo.prototype.initView=function(t,e,o,i,n,r){this.hideAllAdNode(i,e),(r=r||this.setPosition(this.mAdData.indexLeft,o,n)).forEach(function(t,o){pt.instance.createNodeByTemplate(i,co,t,e)}),this.pushScroll(t,e.getComponent(cc.Layout))},mo.prototype.hideAllAdNode=function(t,o){if(o)for(var e=0;e<o.childrenCount;e++)pt.instance.hideNodeByTemplate(t,o.children[e]),e--},mo.prototype.onFwUpdate=function(){this.floatAnim(),this.scrollMove()},mo.prototype.scrollMove=function(){for(var t=0;t<this.mScrollVec.length;t++){var o,e,i,n,r=this.mScrollVec[t],a=r.scrollView;a.isScrolling()||(e=(o=a.getMaxScrollOffset()).y/2+20,i=o.x/2+20,n=a.getContentPosition(),1==r.move2Up?(n.y>e&&(r.move2Up=!1),r.scrollView.setContentPosition(new cc.Vec2(n.x,n.y+this.mMoveSpeed))):0==r.move2Up&&(n.y<-e&&(r.move2Up=!0),r.scrollView.setContentPosition(new cc.Vec2(n.x,n.y-this.mMoveSpeed))),1==r.move2Left?(n.x>i&&(r.move2Left=!1),r.scrollView.setContentPosition(new cc.Vec2(n.x+this.mMoveSpeed,n.y))):0==r.move2Left&&(n.x<-i&&(r.move2Left=!0),r.scrollView.setContentPosition(new cc.Vec2(n.x-this.mMoveSpeed,n.y))))}},mo.prototype.willShow=function(t){lo.prototype.willShow.call(this,t),this.floatRuning=!1,this.addListener(),this.mAdItemList=[],this.mScrollVec=[],this.displayChange(t.showAd,t.callback)},mo.prototype.willHide=function(){lo.prototype.willShow.call(this),this.removeListener(),this.unschedule(this.onFwUpdate)},mo.prototype.displayChange=function(t,o){void 0===o&&(o=null),this.mShowAd=t,this.displayAd(!0),this.mBackCall=o},mo.prototype.displayAd=function(t){var o=this;this.endContainer.active=t&&this.hasAd(m),this.endContainer.active&&this.initEnd(),this.bannerContainer.active=t&&this.hasAd(e),this.topContainer.active=t&&this.hasAd(p),this.floatContainer.active=t&&this.hasAd(a),this.leftContainer.active=this.rightContainer.active=t&&this.hasAd(u),this.exportContainer.active=t&&this.hasAd(s),t&&this.hasAd(s)&&moosnow.http.getAllConfig(function(t){1==t.exportAutoNavigate&&moosnow.platform.navigate2Mini(o.mAdData.indexLeft[D.randomNumBoth(0,o.mAdData.indexLeft.length-1)])}),this.showClose(t)},mo.prototype.onShow=function(t){var o=this;lo.prototype.onShow.call(this,t),moosnow.http.getAllConfig(function(t){t&&(isNaN(t.adScrollViewSpeed)||(o.mMoveSpeed=parseFloat(t.adScrollViewSpeed)))}),this.loadAd(function(){o.schedule(o.onFwUpdate,.016),o.initBanner(),o.initFloatAd(),o.initExport(),o.initTop(),o.initLeftRight(),o.FormData&&o.FormData.callback&&o.FormData.callback()})},mo.prototype.initBanner=function(){var t=this.bannerContainer_layout.getComponent(cc.Layout),o=this.bannerContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.HORIZONTAL,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.bannerContainer_layout,"banner","bannerAdItem")},mo.prototype.initTop=function(){var t=this.topContainer_layout.getComponent(cc.Layout),o=this.topContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.HORIZONTAL,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.topContainer_layout,"top","bannerAdItem")},mo.prototype.initLeftRight=function(){var t=this.mAdData.indexLeft,o=t.length/2,e=t.slice(0,o),i=t.slice(o,t.length),n=this.leftContainer_layout.getComponent(cc.Layout);n.type=cc.Layout.Type.VERTICAL,n.resizeMode=cc.Layout.ResizeMode.CONTAINER;var r=this.rightContainer_layout.getComponent(cc.Layout);r.type=cc.Layout.Type.VERTICAL,r.resizeMode=cc.Layout.ResizeMode.CONTAINER;var a=this.leftContainer_scroll.getComponent(cc.ScrollView),s=this.rightContainer_scroll.getComponent(cc.ScrollView);this.initView(a,this.leftContainer_layout,"left","leftAdItem",function(){},i),this.initView(s,this.rightContainer_layout,"right","leftAdItem",function(){},e)},mo.prototype.initEnd=function(){var t=this.endContainer_layout.getComponent(cc.Layout);t.type=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.NONE,this.initFiexdView(this.endContainer_layout,"8个固定大导出","exportAdItem")},mo.prototype.initExport=function(){var t=this.exportContainer_layout.getComponent(cc.Layout),o=this.exportContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,t.startAxis=cc.Layout.AxisDirection.VERTICAL,this.initView(o,this.exportContainer_layout,"大导出","exportAdItem")},mo);function mo(){var t=null!==lo&&lo.apply(this,arguments)||this;return t.endContainer=null,t.endContainer_layout=null,t.exportContainer=null,t.exportContainer_scroll=null,t.exportContainer_layout=null,t.exportClose=null,t.exportMask=null,t.exportCloseTxt=null,t.btnBack=null,t.floatContainer=null,t.floatFull=null,t.bannerContainer=null,t.bannerContainer_scroll=null,t.bannerContainer_layout=null,t.topContainer=null,t.topContainer_scroll=null,t.topContainer_layout=null,t.leftContainer=null,t.leftContainer_scroll=null,t.leftContainer_layout=null,t.rightContainer=null,t.rightContainer_scroll=null,t.rightContainer_layout=null,t.sideContainer=null,t.sideView=null,t.sideLayout=null,t.btnSideShow=null,t.btnSideHide=null,t.mShowAd=r,t.mPrevShowAd=r,t.mScrollVec=[],t.mEndLogic=[],t.mMoveSpeed=2,t.mFloatIndex=0,t.mFloatRefresh=3,t.mFloatCache={},t.loadNum=0,t.loadManNum=3,t.floatRuning=!1,t.mSecond=3,t.mAdItemList=[],t}var po=(fo.create=function(t){return new t},Object.defineProperty(fo.prototype,"hideForm",{get:function(){return this._hideForm},set:function(t){this._hideForm=t},enumerable:!0,configurable:!0}),fo);function fo(){this._hideForm=!0,this.extraData={},this.zIndex=0}var yo,vo=(t(go,yo=po),go);function go(){var t=null!==yo&&yo.apply(this,arguments)||this;return t.floatPositon=[],t.floatTempletes=["floatAdItem1"],t}var wo=(Co.prototype.showToast=function(t){pt.instance.showForm("toastForm",Ut,t)},Co.prototype.loadAd=function(t){pt.instance.showForm("adForm",uo,h(h({},new vo),t),null,function(){console.log("create ad form")})},Co.prototype.showAd=function(t,o,e){void 0===t&&(t=r),void 0===e&&(e=999),D.platform==b.BYTEDANCE&&moosnow.platform.isIphone()?console.log("头条iphone 不显示广告"):moosnow.event.sendEventImmediately(n.AD_VIEW_CHANGE,{showAd:t,callback:o,zIndex:e})},Co.prototype.hideAd=function(t){moosnow.event.sendEventImmediately(n.AD_VIEW_CHANGE,{showAd:r,callback:t})},Co.prototype.showCoin=function(t){},Co.prototype.showMistouch=function(t){pt.instance.showForm("mistouchForm",ro,t)},Co.prototype.showPrize=function(t){},Co.prototype.showTotal=function(t){pt.instance.showForm("totalForm",Rt,t)},Co.prototype.showEnd=function(t){pt.instance.showForm("endForm",wt,t)},Co.prototype.showPause=function(t){pt.instance.showForm("pauseForm",bt,t)},Co.prototype.showShare=function(t){pt.instance.showForm("shareForm",eo,t)},Co.prototype.showTry=function(t){pt.instance.showForm("tryForm",zt,t)},Co.prototype.showSet=function(t){pt.instance.showForm("setForm",qt,t)},Co.prototype.showBox=function(t){pt.instance.showForm("boxForm",$t,t)},Co.prototype.createForm=function(t){pt.instance.showForm(t,wt,{})},Co);function Co(){}var No,bo=(t(Ao,No=L),Ao.prototype.initPos=function(){},Ao.prototype.move=function(t,o,e){var i=this;this.moveNode=t,this.distince=o,this.showBanner=e,this.initPos();var n=moosnow.data.getCurrentMisTouchCount();moosnow.data.setCurrentMisTouchCount(n+1),moosnow.http.getAllConfig(function(t){isNaN(t.mistouchPosSecond)||(i.mMistouchPosSecond=parseFloat(t.mistouchPosSecond)),moosnow.http.getMistouchPosNum(function(t){i.mMistouchPosNum=t,i.movePosition()})})},Ao.prototype.setPosition=function(t,o,e,i){},Ao.prototype.movePosition=function(){var t,o=this;0==this.mMistouchPosNum?(this.setPosition(this.moveNode,!0,this.pos1.x,this.pos1.y),this.showBanner&&moosnow.platform.showBanner()):moosnow.data.getCurrentMisTouchCount()%this.mMistouchPosNum==0&&(t=this.copyNode(),this.scheduleOnce(function(){o.onPosCallback(t)},this.mMistouchPosSecond))},Ao.prototype.copyNode=function(){},Ao.prototype.onPosCallback=function(t){this.showBanner&&moosnow.platform.showBanner(),this.removeTemp(t),this.setPosition(this.moveNode,!0,this.pos1.x,this.pos1.y),this.unscheduleOnce(this.onPosCallback)},Ao.prototype.removeTemp=function(t){},Ao);function Ao(){var t=null!==No&&No.apply(this,arguments)||this;return t.moveNode=null,t.distince=-100,t.showBanner=!0,t.pos1=cc.Vec2.ZERO,t.pos2=cc.Vec2.ZERO,t.mMistouchPosNum=0,t.mMistouchPosSecond=2,t}var Fo,To=(t(So,Fo=bo),So.prototype.initPos=function(){0==this.pos1.x&&0==this.pos1.y&&(this.pos1=this.moveNode.position.clone(),this.pos2=this.pos1.add(new cc.Vec2(0,this.distince))),this.moveNode.active=!1},So.prototype.setPosition=function(t,o,e,i){t.active=o,t.x=e,t.y=i},So.prototype.copyNode=function(){var t=cc.instantiate(this.moveNode);return t.active=!0,this.moveNode.parent.addChild(t),t.x=this.pos2.x,t.y=this.pos2.y,t},So.prototype.removeTemp=function(t){t.active=!1,t.removeFromParent(),t.destroy()},So);function So(){var t=null!==Fo&&Fo.apply(this,arguments)||this;return t.moveNode=null,t.distince=-100,t.showBanner=!0,t.pos1=cc.Vec2.ZERO,t.pos2=cc.Vec2.ZERO,t}var ko,Do=(t(xo,ko=L),xo.prototype.show=function(t,o){void 0===o&&(o=3),t&&(this.mNode=t,this.hideNode(),this.schedule(this.showNode,o))},xo.prototype.hide=function(t,o){void 0===o&&(o=3),this.mNode=t,this.schedule(this.hideNode,o)},xo.prototype.clear=function(){this.unschedule(this.showNode),this.unschedule(this.hideNode)},xo.prototype.hideNode=function(){this.mNode.active=!1},xo.prototype.showNode=function(){this.mNode.active=!0,this.unschedule(this.showNode)},xo);function xo(){var t=null!==ko&&ko.apply(this,arguments)||this;return t.mNode=null,t}var Lo,Oo=(t(_o,Lo=L),Object.defineProperty(_o.prototype,"DelayMove",{get:function(){return this.mDelayMove||(this.mDelayMove=new To),this.mDelayMove},enumerable:!0,configurable:!0}),Object.defineProperty(_o.prototype,"DelayShow",{get:function(){return this.mDelayShow||(this.mDelayShow=new Do),this.mDelayShow},enumerable:!0,configurable:!0}),_o);function _o(){return Lo.call(this)||this}var Eo,Io=(t(Po,Eo=po),Po);function Po(){return null!==Eo&&Eo.apply(this,arguments)||this}var Bo,Vo=(t(Ro,Bo=po),Ro);function Ro(){var t=null!==Bo&&Bo.apply(this,arguments)||this;return t.showCoinAnim=!0,t.coinOptions=null,t.baseNum=1,t.callback=null,t.shareCallback=null,t.videoCallback=null,t}var Ho,Mo=(t(Uo,Ho=po),Uo);function Uo(){var t=null!==Ho&&Ho.apply(this,arguments)||this;return t.shareCoinNum=0,t}var Qo,Wo=(t(zo,Qo=po),zo);function zo(){return null!==Qo&&Qo.apply(this,arguments)||this}var jo,Go=(t(qo,jo=po),qo);function qo(){var t=null!==jo&&jo.apply(this,arguments)||this;return t.coinNum=0,t}var Ko,Zo=function(){this.x=0,this.y=0,this.z=0},Xo=(t(Yo,Ko=po),Yo);function Yo(){var t=null!==Ko&&Ko.apply(this,arguments)||this;return t.randomY=100,t.randomX=100,t.imgNum=30,t.coinNum=0,t.starVec=new Zo,t.endVec=new Zo,t}var Jo=(Object.defineProperty($o.prototype,"formUtil",{get:function(){return this.mFormUtil},enumerable:!0,configurable:!0}),Object.defineProperty($o.prototype,"delay",{get:function(){return this.mDelay},set:function(t){this.mDelay=t},enumerable:!0,configurable:!0}),$o);function $o(){this.showOptions={endOptions:Io,prizeOptions:Vo,shareOptions:Mo,totalOptions:Wo,touchOptions:Go,coinOptions:Xo},this.mFormUtil=new wo,this.mDelay=new Oo,window.moosnow?(window.moosnow.form=this.formUtil,window.moosnow.delay=this.delay):console.log("没有引入主SDK")}return new Jo,Jo}();
